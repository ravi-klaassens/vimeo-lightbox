/**
 * Custom Video Element
 * Makes video backgrounds responsive with optional lightbox player functionality
 * Compatible with Vimeo and potentially other video platforms
 * 
 * @license MIT
 * @version 1.0.3
 */
"use strict";const config={containerClass:"custom-video-container",wrapperClass:"embed-wrapper",triggerClass:"video-trigger",lightboxClass:"video-lightbox",playerClass:"video-player",controlsClass:"video-controls",lightboxAttribute:"data-lightbox",colorAttribute:"data-color",positionAttribute:"data-position",paddingLeftAttribute:"data-padding-left",paddingTopAttribute:"data-padding-top",paddingRightAttribute:"data-padding-right",paddingBottomAttribute:"data-padding-bottom",fullClickAttribute:"data-full-click",defaultColor:"00bcd4",defaultPosition:"center",defaultPadding:"0",iconSize:"24px",aspectRatio:16/9,safetyMargin:1.2};let players={},lightboxPlayers={};function handleEscKey(e){"Escape"===e.key&&closeLightbox()}const svgIcons={play:e=>`\n    <svg width="${config.iconSize}" height="${config.iconSize}" viewBox="0 0 22 27" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M0.5 25.95C0.7 26.05 0.8 26.05 1 26.05C1.2 26.05 1.4 26.05 1.5 25.95L21.5 13.95C21.8 13.75 22 13.45 22 13.05C22 12.65 21.8 12.35 21.5 12.15L1.5 0.15C1.2 -0.05 0.8 -0.05 0.5 0.15C0.2 0.35 0 0.65 0 1.05V25.05C0 25.45 0.2 25.75 0.5 25.95ZM2 2.85L19 13.05L2 23.25V2.85Z" fill="#${e}"/>\n    </svg>\n  `,pause:e=>`\n    <svg width="${config.iconSize}" height="${config.iconSize}" viewBox="0 0 20 26" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M1 26C1.6 26 2 25.6 2 25V1C2 0.4 1.6 0 1 0C0.4 0 0 0.4 0 1V25C0 25.6 0.4 26 1 26Z" fill="#${e}"/>\n      <path d="M19 26C19.6 26 20 25.6 20 25V1C20 0.4 19.6 0 19 0C18.4 0 18 0.4 18 1V25C18 25.6 18.4 26 19 26Z" fill="#${e}"/>\n    </svg>\n  `,audioOn:e=>`\n    <svg width="${config.iconSize}" height="${config.iconSize}" viewBox="0 0 34 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M8.6 22.009L18.3 29.809C18.5 29.909 18.7 30.009 18.9 30.009C19 30.009 19.2 30.009 19.3 29.909C19.6 29.709 19.9 29.409 19.9 29.009V1.00902C19.9 0.609017 19.7 0.309017 19.3 0.109017C19 -0.0909831 18.5 0.00901724 18.2 0.209017L8.5 8.00902H5C2.2 8.00902 0 10.209 0 13.009V17.009C0 19.809 2.2 22.009 5 22.009H8.6ZM2 17.009V13.009C2 11.309 3.3 10.009 5 10.009H9C9.2 10.009 9.4 9.90902 9.6 9.80902L18 3.10902V26.909L9.6 20.209C9.4 20.109 9.2 20.009 9 20.009H5C3.3 20.009 2 18.709 2 17.009Z" fill="#${e}"/>\n      <path d="M23.8 18.609C24 18.809 24.3 18.909 24.5 18.909C24.7 18.909 25 18.809 25.2 18.609C26.3 17.509 27 16.009 27 14.409C27 12.809 26.4 11.309 25.2 10.209C24.8 9.80902 24.2 9.80902 23.8 10.209C23.4 10.609 23.4 11.209 23.8 11.609C25.4 13.209 25.4 15.709 23.8 17.309C23.4 17.609 23.4 18.209 23.8 18.609Z" fill="#${e}"/>\n      <path d="M28.8 5.20902C28.4 5.60902 28.4 6.20902 28.8 6.60902C30.9 8.70902 32 11.409 32 14.409C32 17.309 30.9 20.109 28.8 22.209C28.4 22.609 28.4 23.209 28.8 23.609C29 23.809 29.3 23.909 29.5 23.909C29.7 23.909 30 23.809 30.2 23.609C32.7 21.109 34 17.909 34 14.409C34 10.909 32.6 7.70902 30.2 5.20902C29.8 4.80902 29.2 4.80902 28.8 5.20902Z" fill="#${e}"/>\n    </svg>\n  `,audioOff:e=>`\n    <svg width="${config.iconSize}" height="${config.iconSize}" viewBox="0 0 35 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M34.4 28.6L2.4 0.6C1.9 0.1 1.1 0.1 0.6 0.6C0.1 1.1 0.1 1.9 0.6 2.4L8.2 9.1C7.9 9.3 7.5 9.5 7.1 9.7C6.8 9.9 6.6 9.9 6.4 10.1L1.9 5.6C1.4 5.1 0.6 5.1 0.1 5.6C-0.4 6.1 -0.4 6.9 0.1 7.4L4.6 11.9C3.6 13.9 3.6 16.2 4.6 18.1L0.1 22.6C-0.4 23.1 -0.4 23.9 0.1 24.4C0.3 24.6 0.6 24.7 0.9 24.7C1.2 24.7 1.5 24.6 1.7 24.4L6.2 19.9C6.4 20.1 6.6 20.1 6.9 20.3C7.3 20.5 7.7 20.7 8 20.9L10.6 23.2L19.1 30.1C19.3 30.3 19.6 30.3 19.8 30.3C19.9 30.3 20.1 30.3 20.2 30.2C20.5 30 20.8 29.7 20.8 29.3V19.9L32.6 30.1C32.8 30.3 33.1 30.4 33.4 30.4C33.7 30.4 34 30.3 34.2 30.1C34.9 29.7 34.9 28.9 34.4 28.6ZM18.9 27L11.6 21L8.9 18.7C8.7 18.5 8.3 18.4 8 18.2C7.7 18 7.4 17.9 7.1 17.9C6.2 17.9 5.3 17.6 4.6 17C3.2 15.6 3.2 13.3 4.6 11.8C5.3 11.1 6.2 10.8 7.1 10.8C7.4 10.7 7.7 10.5 8 10.3C8.2 10.1 8.6 10 8.9 9.8L18.9 18.2V27Z" fill="#${e}"/>\n      <path d="M20.6 0.1C20.3 -0.1 19.8 0 19.5 0.2L13.5 5.1C13 5.5 12.9 6.3 13.3 6.8C13.7 7.3 14.5 7.4 15 7L19.8 3V15.1C19.8 15.8 20.4 16.4 21.1 16.4C21.8 16.4 22.4 15.8 22.4 15.1V1.1C22.7 0.7 22.5 0.4 22.1 0.2C21.8 0.1 21.1 -0.1 20.6 0.1Z" fill="#${e}"/>\n      <path d="M32.6 14.4C32.6 11.8 31.8 9.3 30.3 7.3C29.9 6.8 29.1 6.7 28.6 7.1C28.1 7.5 28 8.3 28.4 8.8C29.6 10.5 30.3 12.4 30.3 14.4C30.3 14.7 30.3 14.9 30.3 15.2C30.2 15.9 30.7 16.6 31.4 16.7H31.5C32.2 16.7 32.8 16.2 32.9 15.5C33 15.1 33 14.8 33 14.4H32.6Z" fill="#${e}"/>\n      <path d="M25.3 14.4C25.3 13.2 24.9 12.1 24.2 11.2C23.8 10.7 23 10.6 22.5 11C22 11.4 21.9 12.2 22.3 12.7C22.7 13.2 22.9 13.8 22.9 14.4C22.9 14.7 22.9 14.9 22.8 15.2C22.7 15.9 23.2 16.6 23.9 16.7H24C24.7 16.7 25.3 16.2 25.4 15.5C25.4 15.1 25.4 14.8 25.4 14.4H25.3Z" fill="#${e}"/>\n    </svg>\n  `,enterFullscreen:e=>`\n    <svg width="${config.iconSize}" height="${config.iconSize}" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M17 26H25C25.6 26 26 25.6 26 25V17C26 16.4 25.6 16 25 16C24.4 16 24 16.4 24 17V24H17C16.4 24 16 24.4 16 25C16 25.6 16.4 26 17 26Z" fill="#${e}"/>\n      <path d="M1 10C1.6 10 2 9.6 2 9V2H9C9.6 2 10 1.6 10 1C10 0.4 9.6 0 9 0H1C0.4 0 0 0.4 0 1V9C0 9.6 0.4 10 1 10Z" fill="#${e}"/>\n      <path d="M17 2.1H24V9.1C24 9.7 24.4 10.1 25 10.1C25.6 10.1 26 9.7 26 9.1V1.1C26 0.5 25.6 0.1 25 0.1H17C16.4 0.1 16 0.5 16 1.1C16 1.7 16.4 2.1 17 2.1Z" fill="#${e}"/>\n      <path d="M1 26H9C9.6 26 10 25.6 10 25C10 24.4 9.6 24 9 24H2V17C2 16.4 1.6 16 1 16C0.4 16 0 16.4 0 17V25C0 25.6 0.4 26 1 26Z" fill="#${e}"/>\n    </svg>\n  `,exitFullscreen:e=>`\n    <svg width="${config.iconSize}" height="${config.iconSize}" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M25.0078 16.0106H17.0078C16.4078 16.0106 16.0078 16.4106 16.0078 17.0106V25.0106C16.0078 25.6106 16.4078 26.0106 17.0078 26.0106C17.6078 26.0106 18.0078 25.6106 18.0078 25.0106V18.0106H25.0078C25.6078 18.0106 26.0078 17.6106 26.0078 17.0106C26.0078 16.4106 25.6078 16.0106 25.0078 16.0106Z" fill="#${e}"/>\n      <path d="M9.01562 0C8.41562 -5.24537e-08 8.01563 0.4 8.01562 1L8.01562 8L1.01562 8C0.415624 8 0.0156244 8.4 0.0156243 9C0.0156242 9.6 0.415624 10 1.01562 10L9.01562 10C9.61562 10 10.0156 9.6 10.0156 9L10.0156 1C10.0156 0.4 9.61563 5.24537e-08 9.01562 0Z" fill="#${e}"/>\n      <path d="M25.0078 8.10239L18.0078 8.10239V1.10239C18.0078 0.502393 17.6078 0.102393 17.0078 0.102393C16.4078 0.102393 16.0078 0.502393 16.0078 1.10239V9.10239C16.0078 9.70239 16.4078 10.1024 17.0078 10.1024L25.0078 10.1024C25.6078 10.1024 26.0078 9.70239 26.0078 9.10239C26.0078 8.50239 25.6078 8.10239 25.0078 8.10239Z" fill="#${e}"/>\n      <path d="M9 16.0106H1C0.4 16.0106 5.24537e-08 16.4106 0 17.0106C-5.24537e-08 17.6106 0.4 18.0106 1 18.0106H8L8 25.0106C8 25.6106 8.4 26.0106 9 26.0106C9.6 26.0106 10 25.6106 10 25.0106L10 17.0106C10 16.4106 9.6 16.0106 9 16.0106Z" fill="#${e}"/>\n    </svg>\n  `,close:e=>`\n    <svg width="${config.iconSize}" height="${config.iconSize}" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M0.3 21.7C0.5 21.9 0.8 22 1 22C1.2 22 1.5 21.9 1.7 21.7L11 12.4L20.3 21.7C20.5 21.9 20.8 22 21 22C21.2 22 21.5 21.9 21.7 21.7C22.1 21.3 22.1 20.7 21.7 20.3L12.4 11L21.7 1.7C22.1 1.3 22.1 0.7 21.7 0.3C21.3 -0.1 20.7 -0.1 20.3 0.3L11 9.6L1.7 0.3C1.3 -0.1 0.7 -0.1 0.3 0.3C-0.1 0.7 -0.1 1.3 0.3 1.7L9.6 11L0.3 20.3C-0.1 20.7 -0.1 21.3 0.3 21.7Z" fill="#${e}"/>\n    </svg>\n  `};function init(){setupBackgroundVideos();document.querySelectorAll("[fullclick], .fullclick").forEach((e=>{setupFullClickVideo(e)}))}function setupBackgroundVideos(){const e=document.querySelectorAll(`.${config.containerClass}`);e.length&&e.forEach((e=>{const t=e.querySelector(`.${config.wrapperClass}`);if(!t)return;const n=e.querySelector("iframe");if(!n)return;if(null!==e.closest(".hero")||"BODY"===e.parentElement.tagName||"SECTION"===e.parentElement.tagName&&e.parentElement.className.includes("hero")||"absolute"===window.getComputedStyle(e).position&&e.parentElement.offsetHeight>.7*window.innerHeight?setupFullscreenVideo(e,t,n):setupContainerSizedVideo(e,t,n),"on"===e.getAttribute(config.lightboxAttribute)){const t="on"===e.getAttribute(config.fullClickAttribute);if(addVideoTrigger(e,t),t){e.style.cursor="pointer";const t=document.createElement("div");t.className="video-click-overlay",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.zIndex="2",t.style.cursor="pointer",t.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation();const o=getVimeoIdFromSrc(n.src);o&&openLightbox(o,e)})),e.insertBefore(t,e.firstChild)}}}))}function setupFullscreenVideo(e,t,n){const o=e.parentElement.offsetWidth;let l,i;i=e.parentElement.offsetHeight,l=i*config.aspectRatio,l<o&&(l=o,i=l/config.aspectRatio),l*=1.2,i*=1.2,e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.overflow="hidden",e.style.zIndex="0",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.overflow="hidden",n.style.position="absolute",n.style.width=l+"px",n.style.height=i+"px",n.style.top="50%",n.style.left="50%",n.style.transform="translate(-50%, -50%)",n.style.border="none",n.style.display="block",n.style.opacity="1",n.style.visibility="visible"}function setupContainerSizedVideo(e,t,n){function o(){const t=e.offsetWidth,o=e.offsetHeight,l=config.aspectRatio;let i,s;o/t>l?(s=o,i=o/l):(i=t,s=t*l),i*=config.safetyMargin,s*=config.safetyMargin,n.style.position="absolute",n.style.width=i+"px",n.style.height=s+"px",n.style.top="50%",n.style.left="50%",n.style.transform="translate(-50%, -50%)",n.style.border="none",n.style.display="block",n.style.opacity="1",n.style.visibility="visible"}if("static"===window.getComputedStyle(e).position&&(e.style.position="relative"),t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.overflow="hidden",o(),e.updateVideoSizing=o,window.Vimeo&&window.Vimeo.Player)try{const t=new Vimeo.Player(n);t.getVideoWidth().then((function(n){t.getVideoHeight().then((function(t){if(n&&t){const l=t/n;e._videoAspect=l,o()}}))})).catch((function(){console.log("Could not get video dimensions, using default")}));const l="player-"+Date.now();e.id=e.id||l,players[e.id]=t}catch(e){console.log("Error initializing Vimeo player:",e)}}function addVideoTrigger(e,t){e.querySelectorAll(`.${config.triggerClass}`).forEach((e=>e.remove()));const n=document.createElement("button");n.className=config.triggerClass,n.setAttribute("aria-label","Open video in fullscreen");const o=e.getAttribute(config.colorAttribute)||config.defaultColor;n.innerHTML=svgIcons.play(o);const l=e.getAttribute(config.positionAttribute)||config.defaultPosition,i=e.getAttribute(config.paddingLeftAttribute)||config.defaultPadding,s=e.getAttribute(config.paddingTopAttribute)||config.defaultPadding,a=e.getAttribute(config.paddingRightAttribute)||config.defaultPadding,r=e.getAttribute(config.paddingBottomAttribute)||config.defaultPadding;switch(n.style.position="absolute",n.style.background="rgba(0, 0, 0, 0.3)",n.style.borderRadius="50%",n.style.border="none",n.style.width="60px",n.style.height="60px",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.cursor="pointer",n.style.zIndex="5",n.style.transition="opacity 0.3s ease, transform 0.2s ease, background 0.2s ease",n.style.pointerEvents="auto",n.style.opacity="0",l){case"top-left":n.style.top=`${s}em`,n.style.left=`${i}em`,n.style.transform="none";break;case"top-right":n.style.top=`${s}em`,n.style.right=`${a}em`,n.style.transform="none";break;case"bottom-left":n.style.bottom=`${r}em`,n.style.left=`${i}em`,n.style.transform="none";break;case"bottom-right":n.style.bottom=`${r}em`,n.style.right=`${a}em`,n.style.transform="none";break;default:n.style.top="50%",n.style.left="50%",n.style.transform="translate(-50%, -50%)"}n.addEventListener("mouseenter",(()=>{n.style.background="rgba(0, 0, 0, 0.5)",n.style.transform="center"===l?"translate(-50%, -50%) scale(1.1)":"scale(1.1)"})),n.addEventListener("mouseleave",(()=>{n.style.background="rgba(0, 0, 0, 0.3)",n.style.transform="center"===l?"translate(-50%, -50%)":"none"})),n.addEventListener("click",(t=>{t.stopPropagation(),t.preventDefault();const n=getVimeoIdFromSrc(e.querySelector("iframe").src);n&&openLightbox(n,e)})),e.appendChild(n),e.addEventListener("mouseenter",(()=>{n.style.opacity="1"})),e.addEventListener("mouseleave",(()=>{n.style.opacity="0"}))}function getVimeoIdFromSrc(e){const t=e.match(/video\/(\d+)/);return t?t[1]:null}function openLightbox(e,t){closeLightbox();const n=document.createElement("div");n.id="video-lightbox-overlay",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.backgroundColor="rgba(0, 0, 0, 0.9)",n.style.zIndex="1000",n.style.display="flex",n.style.justifyContent="center",n.style.alignItems="center",n.style.cursor="default",n.style.opacity="0",n.style.transition="opacity 0.3s ease";const o=document.createElement("div");o.id="video-lightbox-container",o.style.position="relative",o.style.width="80%",o.style.maxWidth="1200px",o.style.aspectRatio="16/9",o.style.zIndex="1001";const l=t.getAttribute(config.colorAttribute)||config.defaultColor,i=document.createElement("div");i.className=config.playerClass,i.setAttribute("data-initialized","false"),i.setAttribute("data-playing","false"),i.setAttribute("data-muted","false"),i.style.position="relative",i.style.width="100%",i.style.height="100%",i.style.backgroundColor="#000";const s=document.createElement("div");s.className="aspect-ratio-container",s.style.position="relative",s.style.paddingBottom="56.25%",s.style.cursor="pointer";const a=document.createElement("iframe");a.src=`https://player.vimeo.com/video/${e}?api=1&background=0&autoplay=1&loop=0&muted=0&controls=0&transparent=0`,a.setAttribute("frameborder","0"),a.setAttribute("allow","autoplay; fullscreen; picture-in-picture"),a.setAttribute("allowfullscreen",""),a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.width="100%",a.style.height="100%",a.style.zIndex="1";const r=document.createElement("button");r.className="lightbox-close",r.innerHTML=svgIcons.close(l),r.style.position="absolute",r.style.top="20px",r.style.right="20px",r.style.background="none",r.style.border="none",r.style.cursor="pointer",r.style.zIndex="10",r.style.padding="5px";const c=document.createElement("div");c.className="video-click-overlay",c.style.position="absolute",c.style.top="0",c.style.left="0",c.style.width="100%",c.style.height="100%",c.style.zIndex="2",c.style.cursor="pointer";const d=document.createElement("div");d.className=config.controlsClass,d.style.position="absolute",d.style.bottom="0",d.style.left="0",d.style.width="100%",d.style.padding="15px",d.style.background="linear-gradient(transparent, rgba(0,0,0,0.7))",d.style.display="flex",d.style.alignItems="center",d.style.transition="opacity 0.3s ease",d.style.zIndex="3";const u=document.createElement("div");u.style.display="flex",u.style.alignItems="center",u.style.marginRight="15px";const p=document.createElement("button");p.setAttribute("data-control","play"),p.setAttribute("aria-label","Play"),p.innerHTML=svgIcons.play(l),p.style.background="none",p.style.border="none",p.style.color=`#${l}`,p.style.cursor="pointer",p.style.marginRight="15px",p.style.padding="5px";const y=document.createElement("div");y.style.flex="1",y.style.position="relative";const g=document.createElement("progress");g.setAttribute("max","100"),g.setAttribute("value","0"),g.style.width="100%",g.style.height="5px",g.style.position="absolute",g.style.top="50%",g.style.transform="translateY(-50%)",g.style.borderRadius="3px",g.style.overflow="hidden",g.style.appearance="none",g.style.backgroundColor="#444";const f=document.createElement("input");f.type="range",f.setAttribute("data-control","timeline"),f.setAttribute("min","0"),f.setAttribute("max","100"),f.setAttribute("value","0"),f.setAttribute("step","0.1"),f.style.width="100%",f.style.height="15px",f.style.margin="0",f.style.position="relative",f.style.appearance="none",f.style.backgroundColor="transparent",f.style.cursor="pointer",f.style.zIndex="2";const m=document.createElement("div");m.style.display="flex",m.style.alignItems="center",m.style.marginLeft="10px";const C=document.createElement("button");C.setAttribute("data-control","mute"),C.setAttribute("aria-label","Mute"),C.innerHTML=svgIcons.audioOn(l),C.style.background="none",C.style.border="none",C.style.color=`#${l}`,C.style.cursor="pointer",C.style.marginRight="15px",C.style.padding="5px";const h=document.createElement("button");h.setAttribute("data-control","fullscreen"),h.setAttribute("aria-label","Toggle fullscreen"),h.innerHTML=svgIcons.enterFullscreen(l),h.style.background="none",h.style.border="none",h.style.color=`#${l}`,h.style.cursor="pointer",h.style.padding="5px";const b=document.createElement("style");b.textContent=`\n    .${config.controlsClass} progress::-webkit-progress-bar {\n      background-color: #444;\n      border-radius: 3px;\n    }\n    \n    .${config.controlsClass} progress::-webkit-progress-value {\n      background-color: #${l};\n      border-radius: 3px;\n    }\n    \n    .${config.controlsClass} progress::-moz-progress-bar {\n      background-color: #${l};\n      border-radius: 3px;\n    }\n    \n    .${config.lightboxClass} button[data-control] {\n      opacity: 0.8;\n      transition: opacity 0.2s ease;\n    }\n    \n    .${config.lightboxClass} button[data-control]:hover {\n      opacity: 1;\n    }\n    \n    /* Mobile styles */\n    @media (max-width: 768px) {\n      #video-lightbox-container {\n        width: 95% !important;\n      }\n      \n      .${config.controlsClass} {\n        padding: 10px !important;\n      }\n      \n      .${config.controlsClass} button {\n        padding: 3px !important;\n      }\n    }\n  `,document.head.appendChild(b),y.appendChild(g),y.appendChild(f),u.appendChild(p),m.appendChild(C),m.appendChild(h),d.appendChild(u),d.appendChild(y),d.appendChild(m),s.appendChild(a),s.appendChild(c),s.appendChild(d),i.appendChild(s),o.appendChild(i),o.appendChild(r),n.appendChild(o),document.body.appendChild(n),document.body.style.overflow="hidden",n.addEventListener("click",(e=>{e.target===n&&closeLightbox()})),setTimeout((()=>{n.style.opacity="1"}),10),waitForVimeoApi().then((()=>{const e=new Vimeo.Player(a);i.player=e,i.lightbox=n;const t="lightbox-"+Date.now();o.id=t,lightboxPlayers[t]=e,setTimeout((()=>{setupLightboxControls(i,l),c.addEventListener("click",(t=>{t.target===d||d.contains(t.target)||(t.preventDefault(),t.stopPropagation(),"true"===i.getAttribute("data-playing")?e.pause():e.play())}))}),100)})),r.addEventListener("click",(()=>{closeLightbox()})),document.addEventListener("keydown",handleEscKey)}function closeLightbox(){const e=document.getElementById("video-lightbox-overlay");if(e){const t=e.querySelector(`.${config.playerClass}`);t&&t.player&&t.player.unload(),e.style.opacity="0",setTimeout((()=>{for(const e in lightboxPlayers)if(Object.prototype.hasOwnProperty.call(lightboxPlayers,e)){const t=lightboxPlayers[e];if(t&&"function"==typeof t.destroy)try{t.destroy()}catch(e){console.log("Error destroying player:",e)}}lightboxPlayers={},document.querySelectorAll("style").forEach((e=>{e.textContent.includes(config.controlsClass)&&e.remove()})),e.remove(),document.body.style.overflow="",document.removeEventListener("keydown",handleEscKey)}),300)}}function setupLightboxControls(e,t){const n=e.player,o=e.lightbox;if(!n||!o)return;const l=o.querySelector('[data-control="play"]'),i=o.querySelector('[data-control="mute"]'),s=o.querySelector('[data-control="fullscreen"]'),a=o.querySelector('[data-control="timeline"]'),r=o.querySelector("progress"),c=o.querySelector(`.${config.controlsClass}`),d=(o.querySelector("iframe"),o.querySelector(".aspect-ratio-container"),o.querySelector(".video-click-overlay"));let u;e.setAttribute("data-initialized","true"),d&&d.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),"true"===e.getAttribute("data-playing")?n.pause():n.play()})),l&&l.addEventListener("click",(o=>{o.preventDefault(),o.stopPropagation(),"true"===e.getAttribute("data-playing")?(n.pause(),e.setAttribute("data-playing","false"),l.innerHTML=svgIcons.play(t),l.setAttribute("aria-label","Play")):(n.play(),e.setAttribute("data-playing","true"),l.innerHTML=svgIcons.pause(t),l.setAttribute("aria-label","Pause"))})),i&&i.addEventListener("click",(o=>{o.preventDefault(),o.stopPropagation(),"true"===e.getAttribute("data-muted")?(n.setVolume(1),e.setAttribute("data-muted","false"),i.innerHTML=svgIcons.audioOn(t),i.setAttribute("aria-label","Mute")):(n.setVolume(0),e.setAttribute("data-muted","true"),i.innerHTML=svgIcons.audioOff(t),i.setAttribute("aria-label","Unmute"))})),s&&s.addEventListener("click",(()=>{if(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)e.setAttribute("data-fullscreen","false"),(document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen).call(document),s.innerHTML=svgIcons.enterFullscreen(t);else{e.setAttribute("data-fullscreen","true");const n=e.querySelector(".aspect-ratio-container");(n.requestFullscreen||n.webkitRequestFullscreen||n.mozRequestFullScreen||n.msRequestFullscreen).call(n),s.innerHTML=svgIcons.exitFullscreen(t)}c&&(c.style.opacity="1")})),a&&["input","change"].forEach((e=>{a.addEventListener(e,(()=>{n.getDuration().then((e=>{const t=a.value/100*e;n.setCurrentTime(t),r&&(r.value=a.value)}))}))})),n.on("timeupdate",(e=>{a&&n.getDuration().then((t=>{const n=e.seconds/t*100;a.value=n,r&&(r.value=n)}))})),n.on("play",(()=>{e.setAttribute("data-playing","true"),l&&(l.innerHTML=svgIcons.pause(t),l.setAttribute("aria-label","Pause"))})),n.on("pause",(()=>{e.setAttribute("data-playing","false"),l&&(l.innerHTML=svgIcons.play(t),l.setAttribute("aria-label","Play"))})),n.getDuration().then((e=>{a&&(a.max=100),r&&(r.max=100)})),o.addEventListener("mousemove",(()=>{c&&(c.style.opacity="1"),clearTimeout(u),u=setTimeout((()=>{"true"===e.getAttribute("data-playing")&&"true"===!e.getAttribute("data-fullscreen")&&c&&(c.style.opacity="0")}),3e3)})),o.addEventListener("touchstart",(()=>{c&&(c.style.opacity="1"),clearTimeout(u)})),document.addEventListener("fullscreenchange",(()=>{document.fullscreenElement&&c&&(c.style.opacity="1")})),n.play()}function waitForVimeoApi(){return new Promise((e=>{if(window.Vimeo&&window.Vimeo.Player)e();else{const t=document.createElement("script");t.src="https://player.vimeo.com/api/player.js",t.onload=e,document.head.appendChild(t)}}))}function createClickOverlay(e,t=!1){e.querySelectorAll(".video-click-overlay").forEach((e=>e.remove()));const n=document.createElement("div");return n.className="video-click-overlay",n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.right="0",n.style.bottom="0",n.style.width="100%",n.style.height="100%",n.style.cursor="pointer",n.style.zIndex=t?"3":"1",n.style.background="transparent",n.addEventListener("click",(n=>{n.stopPropagation();const o=e.querySelector("iframe");if(o&&o.contentWindow){const n=t?lightboxPlayers[e.id]:players[e.id];n&&n.getPaused().then((e=>{e?n.play():n.pause()})).catch((e=>console.log("Error checking video state:",e)))}})),e.appendChild(n),n}function setupFullClickVideo(e){(e.getAttribute("fullclick")||e.classList.contains("fullclick"))&&createClickOverlay(e)}function updatePlayPauseState(e,t){}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",init):init(),window.addEventListener("resize",(function(){setupBackgroundVideos(),document.querySelectorAll(`.${config.containerClass}`).forEach((e=>{e.updateVideoSizing&&"function"==typeof e.updateVideoSizing&&e.updateVideoSizing()}))}));